---
title: 角色与权限策略
slug: /key-concepts/roles-and-permission-policies
---

# 角色与权限策略

本文档将介绍 API7 企业版中的高级功能：角色和权限策略的概念。

## 概述

- 角色：定义具有特定访问级别的用户组。你可以创建自定义角色，对具有相似权限需求的用户进行分类。**一个角色可以与多个权限策略相关联。**
- 权限策略：它们充当蓝图，概述 API7 企业版中特定资源（例如，网关组、已发布的服务）的允许操作（权限）。**单个权限策略可以共享并应用于多个角色，从而提高效率和一致性。**

通过将权限策略与角色关联，你可以有效地为不同的用户组分配适当的访问级别。这简化了访问控制管理，并确保用户只有执行其任务所需的权限。

## 角色和权限策略如何工作

考虑这样一种场景：你创建了一个名为 `Gateway Group Manager` 的自定义角色，并将其附加到名为 `Gateway Group Basics Actions` 的权限策略。
此权限策略将 `GetGatewayGroups` 操作授予所有网关组资源（资源范围为 `*`），允许具有 `Gateway Group Manager` 角色的用户在仪表板上查看网关组列表，并直接使用 `Get all gateway groups` API 或利用 API7 工具（如 ADC 和 API7 Ingress Controller）检索网关组列表。

关键点：

- 角色用于根据用户的共享权限要求对用户进行分类。对角色的附加权限策略的更改将传播到该角色中的所有用户。
- 权限策略指定了 API7 企业版（包括 API7 网关 和 API7 门户）内指定资源的授权操作。
- 将权限策略附加到多个角色会将关联的权限授予这些角色中的所有用户。
- 权限策略可以根据需要进行详细或广泛的定义。从基本设置开始，然后随着访问控制要求的发展对其进行细化。

## 使用案例

### 内置超级管理员角色

API7 企业版在初始系统设置时提供了一个预定义的角色，名为 `超级管理员`。此角色与内置的 `super-admin-permission-policy` 相关联，该策略授予对 API7 企业版内所有操作和资源的完全访问权限。内置的角色和策略都是不可编辑的，以确保核心系统安全。

初始 `admin` 帐户永久绑定到 `超级管理员` 角色，并且其角色无法更改。这加强了最小权限原则，并防止意外的权限提升。

### 使用自定义角色扩展访问控制

虽然内置角色和策略提供完全访问权限，但 API7 企业版使你能够创建具有精细权限的自定义角色。对于需要广泛访问的场景，你甚至可以将 `super-admin-permission-policy` 附加到你的自定义角色。

这是一个示例场景：隔离环境和定制安全性

通过将权限策略与特定网关组关联，你可以为每个环境定义精细的安全控制。与测试或 UAT 等开发环境中更宽松的设置相比，这允许你在生产等环境中实施更严格的访问限制。

1. 定义精细权限策略

为每个网关组创建特定的权限策略，例如 `test-gateway-group-full-access`、`uat-gateway-group-full-access` 和 `production-gateway-group-full-access`。这些策略将定义每个环境中允许的操作和资源。

2. 分配具有受控访问权限的角色

创建自定义角色以对具有相似访问需求的用户进行分类。
将适当的权限策略附加到每个角色：

- 开发团队成员：授予对 `test-gateway-group-full-access` 策略的访问权限，允许他们仅在测试环境中进行更改。
- 开发团队领导：分配对 `test-gateway-group-full-access` 和 `uat-gateway-group-full-access` 策略的访问权限。这使他们能够在测试和 UAT 环境中工作，可能包括将稳定配置从测试同步到 UAT 的能力。
- 测试工程师：附加 `uat-gateway-group-full-access` 和 `production-gateway-group-full-access` 策略。这将他们的访问权限限制在 UAT 和生产环境，专注于新的 API 测试和发布任务。

## 如何配置权限策略

API7 企业版目前将权限策略存储为 JSON 文档。

