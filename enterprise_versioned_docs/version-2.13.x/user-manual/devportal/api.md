---
title: API
slug: /user-manual/devportal/api
tags:
- API7 Enterprise
---

## 新增 API
#### 使用场景

将一个新的 API 发布到开发者门户，让开发者可以查看 API 介绍与文档，并订阅 API。

#### 使用限制

- API 必须关联 API7 网关中已有的路由，且路由上已配置好必须的插件。
- 新增 API 需要提前准备好 OpenAPI Spec 文档。
- 将 API 发布到开发者门户，可以给 API 更换名称，不一定需要和网关中关联的 API 保持一致。

#### 操作步骤

**步骤1：** 登录 API7 Enterprise 控制台。

**步骤2：** 在顶部导航菜单，点击`开发者门户`。

**步骤3：** 在左侧菜单，点击`API`。

**步骤4：** 点击`新增 API`按钮。

**步骤5：** 填写表单。

**步骤6：** 点击`提交`按钮。

**验证方式：** 在 API 列表中可以查看到新增成功的 API。

## 删除 API
#### 使用场景

当 API 下线或者废弃时，删除 API。

#### 使用限制

- 删除 API 后，之前订阅此 API 的开发者将立刻无法继续调用。请务必确保没有业务影响后再操作
- 删除的 API 无法恢复，需要重新添加，开发者也需要重新订阅。
- 从开发者门户删除 API，仅仅是指从开发者门户产生的订阅不再有效，也无法通过开发者门户产生新的订阅，不会连带从 API7 网关删除关联路由/API，也不会影响您通过其他方式向开发者发放的 API key。

#### 操作步骤

**步骤1：** 登录 API7 Enterprise 控制台。

**步骤2：** 在顶部导航菜单，点击`开发者门户`。

**步骤3：** 在左侧菜单，点击`API`。

**步骤4：** 选择目标 API，点击对应的 `删除` 按钮。

**验证方式：** 在API 列表中无法查看到该 API。

## 新增 API 订阅
#### 使用场景

- 由管理员在管理端对应用直接进行 API 订阅，免去审批流程。也可以用于预置 API 的初始调用方。

#### 使用限制

- 必须先由开发者创建应用。
- API 无法脱离应用，直接被特定开发者订阅或使用。

#### 操作步骤-管理员发起

**步骤1：** 登录 API7 Enterprise 控制台。

**步骤2：** 在顶部导航菜单，点击`开发者门户`。

**步骤3：** 在左侧菜单，点击`API` 。

**步骤4：** 选择需要订阅的 API，点击对应的`查看`按钮。

**步骤5：** 点击`新增 API 订阅`按钮。

**步骤6：** 选择需要订阅的应用。

**步骤7：**  点击`确定`按钮。

**验证方式：** 
- 在应用下 API 订阅列表中，可以查看到新增的 API 订阅条目。、
- 在 API 下的订阅列表中，可以查看到新增的已订阅应用。
- 开发者使用该应用的访问凭证，可以成功调用此 API。

## 取消 API 订阅
#### 使用场景

- 由管理员在管理端对某个应用下的 API 进行取消订阅，应用对该 API 的访问凭证失效。
- 由开发者在展示端进行取消 API 订阅操作，无需管理员审批同意。

#### 使用限制

- 取消 API 订阅，仅限取消从开发者门户成功产生的 API 订阅记录。如果是在 API7 网关上手动修改过 API 订阅相关的消费者或者插件，无法反映在开发者门户中。
- 取消后开发者仍可重新发起订阅申请。

#### 操作步骤-管理员发起

**步骤1：** 登录 API7 Enterprise 控制台。

**步骤2：** 在顶部导航菜单，点击`开发者门户`。

**步骤3：** 在左侧菜单，点击`API` 。

**步骤4：** 选择需要取消订阅的 API，点击对应的`查看`按钮。

**步骤5：** 选择需要取消订阅的应用，点击对应的`取消订阅`按钮。

**验证方式：** 
- 在应用下 API 订阅列表中，看不到已被取消订阅的 API。
- 在 API 下的订阅列表中，看不到已经取消的应用。
- 开发者使用该应用的访问凭证，已无法调用此 API。

## 同意 API 订阅申请
#### 使用场景

开发者以应用为主体对某条 API 提出订阅申请，管理员同意该应用的订阅申请，应用获得 API key（如果 API 开启了认证）。

#### 使用限制

- 如果 API 本身没有开启认证类插件，本身不需要 API key 即可调用，那本质上是否同意 API 订阅申请并不影响可以直接调用此 API。
- 后续会加入主动通知管理员有审批待处理。

#### 操作步骤

**步骤1：** 登录 API7 Enterprise 控制台。

**步骤2：** 在顶部导航菜单，点击`开发者门户`。

**步骤5：** 也可以在左侧菜单，点击`API` 。

**步骤6：** 选择需要同意订阅的 API，点击对应的`查看`按钮。

**步骤7：** 选择需要同意订阅的应用，点击对应的`同意`按钮。

**验证方式：** 
- 在应用下 API 订阅列表中，可以查看到新增的 API 订阅条目。、
- 在 API 下的订阅列表中，可以查看到新增的已订阅应用。
- 开发者使用该应用的访问凭证，可以成功调用此 API。

## 拒绝 API 订阅申请
#### 使用场景

开发者以应用为主体对某条 API 提出订阅申请，管理员拒绝该应用的订阅申请，应用无法调用此 API。

#### 使用限制

- 如果 API 本身没有开启认证类插件，本身不需要 API key 即可调用，那本质上是否拒绝 API 订阅申请并不影响可以直接调用此 API。
- 后续会加入主动通知管理员有审批待处理。

#### 操作步骤

**步骤1：** 登录 API7 Enterprise 控制台。

**步骤2：** 在顶部导航菜单，点击`开发者门户`。

**步骤5：** 也可以在左侧菜单，点击`API` 。

**步骤6：** 选择需要拒绝订阅的 API，点击对应的`查看`按钮。

**步骤7：** 选择需要拒绝订阅的应用，点击对应的`拒绝`按钮。

**验证方式：** 
- 在应用下 API 列表页中，该 API 订阅记录显示状态为拒绝。
- 开发者使用该应用的访问凭证，无法调用此 API。
